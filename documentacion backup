### Introducci√≥n

En este caso nos basamos en hacer copias de seguridad, a la cual haremos a√±adidos extras para asi mejorar la activdad del backup.

## Requisitos

- Depender√° de si almacenas ficheros localmente o en S3/NFS simulado.
- Requiere m√°s disco que CPU.

### ‚úÖ Instancia recomendada:

- `t3.small` (1 vCPU, 2 GB RAM) + disco EBS m√°s grande (ej. 100‚Äì200 GB), gratuitamente, **AWS nos deja 30 GB**, pero para hacer pruebas est√° bien de todos modos.
- Usa S3 si no necesitas persistencia en EBS (ahorras costes y tiempo)

---

## Instalaci√≥n del cliente MySQL

Vamos a instalar el cliente de **MySQL**, que nos sirve tambi√©n para hacer backups, ya que tambi√©n es m√°s accesible y podremos acceder remotamente a la base de datos.
![backup](https://github.com/MiquelSerra-ITB2425/pro-ASIXcD1-g2/blob/main/images/backup2.png)

Si nos conectamos con el **host**, **usuario** y **password** correspondiente, nos conectaremos de manera exitosa.

---

## Crear una copia de seguridad

Ahora vamos a hacer una copia de seguridad de la base de datos `cpd_dg2`.

Primero de todo, tenemos que tener **todos los permisos correspondientes**, porque a la hora de hacer la copia de seguridad nos saldr√°n errores una tras otra.

Esta es la comanda para hacer una copia de seguridad. En resumen quiere decir:

- hacer copia de seguridad
- con el usuario
- con password (que nos la pedir√° luego)
- el host o IP
- seleccionar todas las bases de datos o una en concreto
- definir la ruta de guardado
- a√±adir la fecha en que se hizo la copia

### üõ†Ô∏è Ejemplo de comando:

```bash
mysqldump -u usuario -p -h host_basedatos nombre_basedatos > /ruta/backup_$(date +%Y-%m-%d).sql

## Comprobacion y a√±adidos

Para comprobar que se hizo correctamente, buscamos la ubicaci√≥n del backup, vemos que esta ahi.

Vemos que si hacemos si hacemos un nano o un cat del sql, vemos que se hizo correctamente.

Ademas hemos automatizado la copia de seguriddad con la comanda crontab -e, que automaticamente podremos hacer automatizaciones de todo tipo. En nuestro caso hicimos de esa manera

- hacer copia di√°rias a kas 23:59h
- accion correspondiente (mysqldump)
- seleccionar la base de datos
- definir la ruta de guardado
- a√±adir la fecha en que se hizo la copia

### üõ†Ô∏è Ejemplo de comando:

```bash
59 23 * * * mysqldump --databases cpd_dg2 > /home/ubuntu/backups/pro_asixcd_g2/backup_$(date +\%F_\%H-\%M-\%S).sql

Esto es un recurso autom√°tico que utiliza el usuario, password y host para poder conectar autom√°ticamente cuando hacemos el comando mysql para conectar nuestra base de datos, esto enlaza con √©l

Ponemos permisos de leer y escribir para si garantizar la seguridad de nuestra base de datos.
